[Rails] 1フォームで1対多のモデルを編集可能にしてみる

# Item の scaffold を作成

```
rails g scaffold item name:string price:integer
```

# Item の子要素。Photo model を作成

```
rails g model photo title:string item_id:integer
```

## Item と、Photo をリレーション

app/models/Photo.rb

```
class Photo < ActiveRecord::Base
  belongs_to :item
end
```

app/models/item.rb

```
class Item < ActiveRecord::Base
  has_many :photos, dependent: :destroy
end
```

db/seeds.rb

```
1.upto(10) do |i|
  item = Item.create(name: "item_#{i}", price: i*100)
  1.upto(5) do |j|
    item.photos << Photo.create(title: "#{i}_#{j}")
  end
end
```

# 別件

ここで急に haml で書きたくなった

- Gemfile

```
gem 'haml-rails'
gem 'erb2haml'
```

```
bundle install
```

一括変換!

```
rake haml:replace_erbs
```

# 参考

- [Rails4で1対多のリレーションをモデルに実装する - Rails Webook](http://ruby-rails.hatenadiary.com/entry/20141203/1417601540)
- [3. 1対多の関連を持つオブジェクトを編集可能なフォーム — Railsアプリケーション構築ガイド](http://rails.densan-labs.net/form/relation_register_form.html)



